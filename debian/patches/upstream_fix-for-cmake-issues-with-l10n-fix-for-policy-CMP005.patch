From 210ea799eb59efcfda21c677995a53042d34054a Mon Sep 17 00:00:00 2001
From: Thomas Eschenbacher <Thomas.Eschenbacher@gmx.de>
Date: Tue, 13 Oct 2015 12:30:34 +0200
Subject: [PATCH] fix for cmake issues with l10n, fix for policy CMP0059

---
 CHANGES                   | 2 +-
 CMakeLists.txt            | 4 ++++
 cmake/KwaveHandbook.cmake | 6 ++++--
 doc/CMakeLists.txt        | 3 +++
 4 files changed, 12 insertions(+), 3 deletions(-)

diff --git a/cmake/KwaveHandbook.cmake b/cmake/KwaveHandbook.cmake
index 1f5ffb7..81d2b53 100644
--- a/cmake/KwaveHandbook.cmake
+++ b/cmake/KwaveHandbook.cmake
@@ -39,7 +39,7 @@ ENDFOREACH(_toolbar_icon ${_toolbar_icons})
 FILE(GLOB _docbook_files "${CMAKE_CURRENT_SOURCE_DIR}/*.docbook")
 FILE(GLOB _png_files "${CMAKE_SOURCE_DIR}/doc/${_lang}/*.png")
 
-ADD_CUSTOM_TARGET(html_doc
+ADD_CUSTOM_TARGET(html_doc_${_lang}
     COMMENT "Generating HTML documentation for ${_lang}"
     DEPENDS ${_toolbar_pngs}
     DEPENDS ${_docbook_files}
@@ -57,10 +57,12 @@ ADD_CUSTOM_TARGET(html_doc
     WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
 )
 
+ADD_DEPENDENCIES(html_doc html_doc_${_lang})
+
 #############################################################################
 ### generate and install the icons                                        ###
 
-ADD_CUSTOM_TARGET(generate_icons
+ADD_CUSTOM_TARGET(generate_icons_${_lang}
     ALL
     DEPENDS ${_toolbar_pngs}
     WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
diff --git a/doc/CMakeLists.txt b/doc/CMakeLists.txt
index 7fe5eae..8e504f4 100644
--- a/doc/CMakeLists.txt
+++ b/doc/CMakeLists.txt
@@ -133,6 +133,9 @@ ADD_CUSTOM_TARGET(update-handbook
 #############################################################################
 ### handle the various languages                                          ###
 
+# collects all "html_doc_${_lang}" sub targets
+ADD_CUSTOM_TARGET(html_doc)
+
 FILE(GLOB _files "${CMAKE_SOURCE_DIR}/doc/*/index.docbook")
 FOREACH(_file ${_files})
     # TODO: use DIRECTORY instead of PATH as soon as cmake <= 0.8.1 is no longer used
-- 
2.6.2

