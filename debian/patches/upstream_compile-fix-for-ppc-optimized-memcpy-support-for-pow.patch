From 1bf6aa2f3c1742415755748fe80b5980a8b239e5 Mon Sep 17 00:00:00 2001
From: Thomas Eschenbacher <Thomas.Eschenbacher@gmx.de>
Date: Thu, 30 Jun 2016 18:13:45 +0200
Subject: [PATCH] compile fix for ppc: optimized memcpy support for powerpc has
 been removed

(see commit 92589a6d71fc32615b9390f87e10932d9ffebdb3)
---
 AUTHORS              |  5 -----
 doc/en/index.docbook |  9 ---------
 libkwave/memcpy.c    | 11 -----------
 3 files changed, 25 deletions(-)

diff --git a/AUTHORS b/AUTHORS
index 63f57f0..d113f27 100644
--- a/AUTHORS
+++ b/AUTHORS
@@ -114,11 +114,6 @@ Matthias Kretz, <kretz@kde.org>
 Miguel Freitas
 	* parts of libkwave/memcpy.c
 
-Paul Mackerras <paulus@samba.org>
-	* libkwave/ppcasm_string.h
-	* libkwave/ppcasm_string.S
-	* libkwave/ppc_asm.tmpl
-
 Richard Laerkaeng, <richard@goteborg.utfors.se>
 	* cmake/FindOggVorbis.cmake
 
diff --git a/doc/en/index.docbook b/doc/en/index.docbook
index a56acc8..2e8ff11 100644
--- a/doc/en/index.docbook
+++ b/doc/en/index.docbook
@@ -8493,15 +8493,6 @@
 	    </listitem>
 	    <listitem>
 	    	<para><emphasis role="bold">
-		    Paul Mackerras <email>paulus@samba.org</email>
-		</emphasis></para><para>
-		    libkwave/ppcasm_string.h,
-		    libkwave/ppcasm_string.S,
-		    libkwave/ppc_asm.tmpl
-		</para>
-	    </listitem>
-	    <listitem>
-	    	<para><emphasis role="bold">
 		    Richard Laerkaeng, <email>richard@goteborg.utfors.se</email>
 		</emphasis></para><para>
 		    cmake/FindOggVorbis.cmake
diff --git a/libkwave/memcpy.c b/libkwave/memcpy.c
index 4df3d8e..cc25c2d 100644
--- a/libkwave/memcpy.c
+++ b/libkwave/memcpy.c
@@ -48,10 +48,6 @@
 #include "config.h"
 #endif
 
-#if defined (ARCH_PPC) && !defined (HOST_OS_DARWIN)
-#include "ppcasm_string.h"
-#endif
-
 #ifdef HAVE_SYS_TIMES_H
 #include <sys/times.h>
 #else
@@ -528,10 +524,6 @@ static const struct {
   { "AVX", avx_memcpy, MM_ACCEL_X86_AVX },
 # endif /* HAVE_AVX */
 #endif /* ARCH_X86 */
-#if defined (ARCH_PPC) && !defined (HOST_OS_DARWIN)
-  { "ppcasm", ppcasm_memcpy, 0 },
-  { "ppcasm_cached", ppcasm_cacheable_memcpy, MM_ACCEL_PPC_CACHE32 },
-#endif /* ARCH_PPC && !HOST_OS_DARWIN */
   { "", NULL, 0 }
 };
 
@@ -627,9 +619,6 @@ void probe_fast_memcpy(void)
     "avx",
 # endif /* HAVE_AVX */
 #endif
-#if defined (ARCH_PPC) && !defined (HOST_OS_DARWIN)
-    "ppcasm_memcpy", "ppcasm_cacheable_memcpy",
-#endif
     NULL
   };
 
-- 
2.8.1

